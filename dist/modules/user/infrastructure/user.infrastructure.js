"use strict";var __importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserInfrastructure=void 0;const Database_bootstrap_1=__importDefault(require("src/bootstrap/Database.bootstrap")),user_model_dto_1=require("./dtos/user-model.dto"),user_entity_1=require("./entities/user.entity");class UserInfrastructure{async save(t){const e=Database_bootstrap_1.default.dataSource?.getRepository(user_entity_1.UserEntity),r=user_model_dto_1.UserModelDto.fromDomainToData(t);await(e?.save(r))}async get(t){const e=Database_bootstrap_1.default.dataSource?.getRepository(user_entity_1.UserEntity),r=await(e?.findOne({where:{id:t,active:!0}}));return user_model_dto_1.UserModelDto.fromDataToResponse(r)}async getAll(){const t=Database_bootstrap_1.default.dataSource?.getRepository(user_entity_1.UserEntity),e=await(t?.find({where:{active:!0}}));return user_model_dto_1.UserModelDto.fromDataToResponse(e)}async getByPage(t,e){const r=Database_bootstrap_1.default.dataSource?.getRepository(user_entity_1.UserEntity),[s,a]=await(r?.findAndCount({skip:t*e,take:e,where:{active:!0}}));return[user_model_dto_1.UserModelDto.fromDataToResponse(s),a]}}exports.UserInfrastructure=UserInfrastructure;